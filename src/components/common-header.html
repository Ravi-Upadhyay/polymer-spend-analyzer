<!-- 
** HEADER COMPONENT
* This will contain common header throughout the application
* Here we will try to keep stucture well managed so maximum activities
  will be performed at parent component.
-->

<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="common-header">
    <template>
        <!-- #1. SECTION-1: STYLES -->
        <style>
            :host{
                width: 100%;
                height: 100px;
                display:flex;
                display: -webkit-flex;
                flex-direction: column;
                -ms-flex-direction: row;
                background-color: #ffffff;
                box-shadow: 0px 1px 20px 3px #b1b1b1;
            }
            .h-container {
                width: 100%;
                height: 100px;
                display: flex;
                display: -webkit-flex;
                flex-direction: row;
                -ms-flex-direction: row;
                background-color: #ffffff;
            }
            .logo-wrapper {
                display: flex;
                display: -webkit-flex;
                margin-left: 8.33%;
                width: 16.66%;
                align-items: center;
            }
            .logo-wrapper img {
                flex-shrink: 1;
            }
            .menu-wrapper {
                display: flex;
                display: -webkit-flex;
                width: 49.98%;
            }
            .menu-wrapper span {
                flex: 1 1;
                display: flex;
                display: -webkit-flex;
                justify-content: center;
                align-items: center;
            }

            .logout-wrapper {
                display: flex;
                display: -webkit-flex;
                width: 8.33%;
                margin-left: 16.66%;
            }
        </style>

        <!-- #2. SECTION-2: TEMPLATE -->
        <div class="h-container">
            
            <div class="logo-wrapper">
                <img src="src/images/ing-logo-sm-88x270-mobile.png" alt="Logo-ING" height="60px" />
            </div>

            <div class="menu-wrapper">
                <template is="dom-if" if="{{isLoggedIn}}">
                    <template is="dom-repeat" items={{menu}}>
                        <span><a href="{{_generateURL(rootPath,item.slug)}}">[[item.display]]</a></span>
                    </template>
                </template>
            </div>

            <div class="logout-wrapper">
                <template is="dom-if" if="{{isLoggedIn}}">
                    <button on-click="_logout">Logout</button>
                </template>
            </div>

        </div>
    </template>

    <script>
        // #3. SECTION-3: JS-CONTROLLER-MODEL
        class CommonHeader extends Polymer.Element {
            static get is(){
                return "common-header";
            }

            static get properties(){
                return {
                    isLoggedIn  : {
                        type        : Boolean,
                        notify      : true
                    },
                    menu        : {
                        type        : Array
                    },
                    rootPath    : {
                        type        : String
                    },
                    selected    : {
                        type        : String
                    },
                    logout      : {
                        type        : Object
                    }
                }
            }

            _generateURL(rootPath, slug) {
                return `${rootPath}${slug}`;
            }

            _logout(){
                console.log(`clicked on logout, ${this.isLoggedIn}`);
                // this.isLoggedIn = false;
                // window.location = ``
                this.logout();
            }

            constructor() {
                super();
                var that = this;
                // window.setInterval(function(){
                // console.log(`INSIDE COMMON-HEADER: isLoggedIn: ${that.isLoggedIn}, 
                //             menu: ${that.menu}, rootPath: ${that.rootPath}, 
                //             selected: ${that.selected}`)
                // },6000);
            }
            
        }
        customElements.define(CommonHeader.is,CommonHeader);
    </script>
</dom-module>